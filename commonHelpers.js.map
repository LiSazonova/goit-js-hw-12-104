{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function searchImage(query, page = 1) {\n\n    const params = new URLSearchParams({\n        key: '35791759-f811f161bd6e8c93b24d24d20',\n        q: query,\n        page: page,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n    });\n\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?${params}`);\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst imagesList = document.querySelector('.images-container');\n\nlet lightbox;\n\nexport function renderImages(images) {\n    const imageMarkup = images\n        .map(\n            img => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n        <img \n          class=\"gallery-image\" \n          width=\"360\"\n          src=\"${img.webformatURL}\" \n          alt=\"${img.tags}\" \n          />\n\n      </a>\n      <ul class='description'>\n      <li><strong>Likes</strong> ${img.likes}</li>\n      <li><strong>Views</strong> ${img.views}</li>\n      <li><strong>Comments</strong> ${img.comments}</li>\n      <li><strong>Downloads</strong> ${img.downloads}</li>\n      </ul>\n    </li>`\n        )\n        .join('');\n\n    imagesList.insertAdjacentHTML('beforeend', imageMarkup);\n}\n\nexport function initializeLightbox() {\n    lightbox = new SimpleLightbox('.images-container a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n}\n\nexport function refreshLightbox() {\n    if (lightbox) {\n        lightbox.refresh();\n    } else {\n        initializeLightbox();\n    }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { searchImage } from \"./js/pixabay-api\";\nimport { renderImages, initializeLightbox, refreshLightbox } from \"./js/render-functions\";\n\nconst form = document.querySelector('.form');\nconst imagesList = document.querySelector('.images-container');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\n\nform.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    imagesList.innerHTML = '';\n    loadMoreButton.style.display = 'none';\n    page = 1;\n    query = e.target.elements.query.value.trim();\n\n    if (!query) {\n        iziToast.error({\n            message: 'Search field is empty',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    showLoader('initial');\n\n    try {\n        const data = await searchImage(query, page);\n        if (!data.hits.length) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n        } else {\n            renderImages(data.hits);\n            initializeLightbox();\n            refreshLightbox();\n            if (data.hits.length === 15) {\n                loadMoreButton.style.display = 'block';\n            }\n        }\n    } catch (error) {\n        iziToast.error({\n            message: 'An error occurred while fetching images. Please try again later.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader('initial');\n    }\n\n    form.reset();\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    page += 1;\n    showLoader('more');\n\n    try {\n        const data = await searchImage(query, page);\n        if (data.hits.length) {\n            renderImages(data.hits);\n            refreshLightbox();\n            if (data.hits.length < 15) {\n                loadMoreButton.style.display = 'none';\n            }\n        }\n    } catch (error) {\n        iziToast.error({\n            message: 'An error occurred while fetching images. Please try again later.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader('more');\n    }\n});\n\nfunction showLoader(type) {\n    if (type === 'initial') {\n        loader.style.display = 'block';\n    } else if (type === 'more') {\n        loader.style.display = 'block';\n    }\n}\n\nfunction hideLoader(type) {\n    if (type === 'initial') {\n        loader.style.display = 'none';\n    } else if (type === 'more') {\n        loader.style.display = 'none';\n    }\n}"],"names":["searchImage","query","page","params","axios","error","imagesList","lightbox","renderImages","images","imageMarkup","img","initializeLightbox","SimpleLightbox","refreshLightbox","form","loader","loadMoreButton","iziToast","showLoader","data","hideLoader","type"],"mappings":"+vBAEO,eAAeA,EAAYC,EAAOC,EAAO,EAAG,CAE/C,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGF,EACH,KAAMC,EACN,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,MACpB,CAAK,EAED,GAAI,CAEA,OADiB,MAAME,EAAM,IAAI,4BAA4BD,CAAM,EAAE,GACrD,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CClBA,MAAMC,EAAa,SAAS,cAAc,mBAAmB,EAE7D,IAAIC,EAEG,SAASC,EAAaC,EAAQ,CACjC,MAAMC,EAAcD,EACf,IACGE,GAAO;AAAA,sCACmBA,EAAI,aAAa;AAAA;AAAA;AAAA;AAAA,iBAItCA,EAAI,YAAY;AAAA,iBAChBA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKUA,EAAI,KAAK;AAAA,mCACTA,EAAI,KAAK;AAAA,sCACNA,EAAI,QAAQ;AAAA,uCACXA,EAAI,SAAS;AAAA;AAAA,UAG3C,EACA,KAAK,EAAE,EAEZL,EAAW,mBAAmB,YAAaI,CAAW,CAC1D,CAEO,SAASE,GAAqB,CACjCL,EAAW,IAAIM,EAAe,sBAAuB,CACjD,aAAc,MACd,aAAc,GACtB,CAAK,CACL,CAEO,SAASC,GAAkB,CAC1BP,EACAA,EAAS,QAAO,EAEhBK,GAER,CCxCA,MAAMG,EAAO,SAAS,cAAc,OAAO,EACrCT,EAAa,SAAS,cAAc,mBAAmB,EACvDU,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIhB,EAAQ,GACRC,EAAO,EAEXa,EAAK,iBAAiB,SAAU,MAAM,GAAK,CAQvC,GAPA,EAAE,eAAc,EAEhBT,EAAW,UAAY,GACvBW,EAAe,MAAM,QAAU,OAC/Bf,EAAO,EACPD,EAAQ,EAAE,OAAO,SAAS,MAAM,MAAM,OAElC,CAACA,EAAO,CACRiB,EAAS,MAAM,CACX,QAAS,wBACT,SAAU,UACtB,CAAS,EACD,MACH,CAEDC,EAAW,SAAS,EAEpB,GAAI,CACA,MAAMC,EAAO,MAAMpB,EAAYC,EAAOC,CAAI,EACrCkB,EAAK,KAAK,QAMXZ,EAAaY,EAAK,IAAI,EACtBR,IACAE,IACIM,EAAK,KAAK,SAAW,KACrBH,EAAe,MAAM,QAAU,UATnCC,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,CASR,MAAe,CACZA,EAAS,MAAM,CACX,QAAS,mEACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNG,EAAW,SAAS,CACvB,CAEDN,EAAK,MAAK,CACd,CAAC,EAEDE,EAAe,iBAAiB,QAAS,SAAY,CACjDf,GAAQ,EACRiB,EAAW,MAAM,EAEjB,GAAI,CACA,MAAMC,EAAO,MAAMpB,EAAYC,EAAOC,CAAI,EACtCkB,EAAK,KAAK,SACVZ,EAAaY,EAAK,IAAI,EACtBN,IACIM,EAAK,KAAK,OAAS,KACnBH,EAAe,MAAM,QAAU,QAG1C,MAAe,CACZC,EAAS,MAAM,CACX,QAAS,mEACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNG,EAAW,MAAM,CACpB,CACL,CAAC,EAED,SAASF,EAAWG,EAAM,EAClBA,IAAS,WAEFA,IAAS,UAChBN,EAAO,MAAM,QAAU,QAE/B,CAEA,SAASK,EAAWC,EAAM,EAClBA,IAAS,WAEFA,IAAS,UAChBN,EAAO,MAAM,QAAU,OAE/B"}